[{"metadata":{"name":"es-deviceon-portal","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-deviceon-portal","uid":"c1336557-e4e5-11e9-a1c5-c400ad16bc2d","resourceVersion":"26489574","generation":1,"creationTimestamp":"2019-10-02T07:25:05Z","labels":{"app":"es-deviceon","chart":"es-deviceon-1.0.16","deviceonModule":"deviceon-portal","heritage":"Tiller","release":"es-deviceon"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-deviceon","deviceonModule":"deviceon-portal","release":"es-deviceon"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-deviceon","deviceonModule":"deviceon-portal","release":"es-deviceon"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"es-deviceon","items":[{"key":"serverConfig","path":"Server_Config.xml"}],"defaultMode":420}}],"initContainers":[{"name":"init","image":"adveiss.azurecr.io/es-postgres:9.6.11","command":["sh"],"args":["-c","set -x\n\necho \"Waiting for PostgreSQL to be initialized...\"\nuntil psql -c 'select * from public.device' \u0026\u003e /dev/null; do\n    echo \"Still initializing...\"\n    sleep 2\ndone\n"],"env":[{"name":"PGHOST","value":"es-postgres"},{"name":"PGPORT","value":"5432"},{"name":"PGDATABASE","value":"wisepaas"},{"name":"PGUSER","value":"deviceon"},{"name":"PGPASSWORD","value":"deviceon"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-deviceon-portal","image":"adveiss.azurecr.io/es-deviceon-portal:1.1.32","env":[{"name":"SERVER_ACTIVATENAME","value":"DeviceOn_Data-Server"},{"name":"SERVER_CONFIG","value":"/deviceon/config"},{"name":"CATALINA_OPTS","value":"-Xmx768M -Xms768M -XX:MetaspaceSize=256M -XX:MaxMetaspaceSize=256M"}],"resources":{"limits":{"memory":"2Gi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/deviceon/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T07:31:45Z","lastTransitionTime":"2019-10-02T07:31:45Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2019-10-02T07:31:45Z","lastTransitionTime":"2019-10-02T07:25:05Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-deviceon-portal-6886d46868\" has successfully progressed."}]}},{"metadata":{"name":"es-deviceon-provisioning","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-deviceon-provisioning","uid":"c13a3cec-e4e5-11e9-a1c5-c400ad16bc2d","resourceVersion":"26489014","generation":1,"creationTimestamp":"2019-10-02T07:25:05Z","labels":{"app":"es-deviceon","chart":"es-deviceon-1.0.16","deviceonModule":"provisioning-worker","heritage":"Tiller","release":"es-deviceon"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-deviceon","deviceonModule":"provisioning-worker","release":"es-deviceon"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-deviceon","deviceonModule":"provisioning-worker","release":"es-deviceon"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"es-deviceon","items":[{"key":"serverConfig","path":"Server_Config.xml"}],"defaultMode":420}}],"initContainers":[{"name":"init","image":"adveiss.azurecr.io/es-postgres:9.6.11","command":["sh"],"args":["-c","set -x\n\necho \"Waiting for PostgreSQL to be initialized...\"\nuntil psql -c 'select * from public.device' \u0026\u003e /dev/null; do\n    echo \"Still initializing...\"\n    sleep 2\ndone\n"],"env":[{"name":"PGHOST","value":"es-postgres"},{"name":"PGPORT","value":"5432"},{"name":"PGDATABASE","value":"wisepaas"},{"name":"PGUSER","value":"deviceon"},{"name":"PGPASSWORD","value":"deviceon"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-deviceon-provisioning","image":"adveiss.azurecr.io/es-provisioning-worker:1.1.32","env":[{"name":"SERVER_CONFIG","value":"/deviceon/config"},{"name":"JAVA_OPTS","value":"-Xmx210665K -Xms210665K -XX:MetaspaceSize=64M -XX:MaxMetaspaceSize=64M -Xss228K"}],"resources":{"limits":{"memory":"512Mi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/deviceon/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T07:28:18Z","lastTransitionTime":"2019-10-02T07:28:18Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2019-10-02T07:28:18Z","lastTransitionTime":"2019-10-02T07:25:05Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-deviceon-provisioning-6f5d74c9df\" has successfully progressed."}]}},{"metadata":{"name":"es-deviceon-worker","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-deviceon-worker","uid":"c12f4dbe-e4e5-11e9-a1c5-c400ad16bc2d","resourceVersion":"26489094","generation":1,"creationTimestamp":"2019-10-02T07:25:05Z","labels":{"app":"es-deviceon","chart":"es-deviceon-1.0.16","deviceonModule":"deviceon-worker","heritage":"Tiller","release":"es-deviceon"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-deviceon","deviceonModule":"deviceon-worker","release":"es-deviceon"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-deviceon","deviceonModule":"deviceon-worker","release":"es-deviceon"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"es-deviceon","items":[{"key":"serverConfig","path":"Server_Config.xml"}],"defaultMode":420}},{"name":"script","configMap":{"name":"es-deviceon","items":[{"key":"initPostgres","path":"postgres.sql"},{"key":"initMongo","path":"mongo.js"}],"defaultMode":420}}],"initContainers":[{"name":"init-postgres","image":"adveiss.azurecr.io/es-postgres:9.6.11","command":["sh"],"args":["-c","set -x\n\necho \"Waiting for PostgreSQL to be ready...\"\nuntil pg_isready -q; do\n    echo \"Still waiting...\"\n    sleep 2\ndone\n\necho \"Initializing PostgreSQL roles...\"\npsql -f /deviceon/init/postgres.sql\npsql -c \"SELECT 'x123' FROM pg_database WHERE datname='wisepaas'\" | grep 'x123'\nif [ $? -ne 0 ]; then\n    echo \"Creating 'wisepaas' database...\"\n    psql -c \"CREATE DATABASE wisepaas WITH OWNER wisepaas\"\nfi\n"],"env":[{"name":"PGHOST","value":"es-postgres"},{"name":"PGPORT","value":"5432"},{"name":"PGUSER","value":"postgres"},{"name":"PGPASSWORD","value":"advant1cH"}],"resources":{},"volumeMounts":[{"name":"script","readOnly":true,"mountPath":"/deviceon/init"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"init-mongo","image":"adveiss.azurecr.io/es-mongo:3.6.9-stretch","command":["bash"],"args":["-c","set -x\n\nIFS=';' read -ra M_HOST \u003c\u003c\u003c \"es-mongo\"\nIFS=';' read -ra M_PORT \u003c\u003c\u003c \"27017\"\n\nHOST=\"\"\nif [ ${#M_HOST[@]} -eq ${#M_PORT[@]} ]; then\n    end=${#M_HOST[@]}\n    for ((i = 0; i \u003c end; i++)); do\n        if [ \"${HOST}\" = \"\" ]; then\n            HOST=\"${M_HOST[i]}:${M_PORT[i]}\"\n        else\n            HOST=\"${HOST},${M_HOST[i]}:${M_PORT[i]}\"\n        fi\n    done\nfi\n\nif $(echo ${HOST} | grep -q ','); then\n    HOST=\"mongodb://${HOST}/?replicaSet=rs0\"\nfi\n\necho \"Waiting for MongoDB to be ready...\"\nuntil mongo --host ${HOST} -u \"admin\" -p \"advant1cH\" --eval \"db.adminCommand('ping')\" admin; do\n    echo \"Still waiting...\"\n    sleep 2\ndone\n\necho \"Initializing MongoDB...\"\nmongo --host ${HOST} -u \"admin\" -p \"advant1cH\" admin /deviceon/init/mongo.js\n"],"resources":{},"volumeMounts":[{"name":"script","readOnly":true,"mountPath":"/deviceon/init"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-deviceon-worker","image":"adveiss.azurecr.io/es-deviceon-worker:1.1.32","env":[{"name":"SERVER_ACTIVATENAME","value":"DeviceOn_Data-Server"},{"name":"SERVER_CONFIG","value":"/deviceon/config"},{"name":"JAVA_OPTS","value":"-Xmx384M -Xms384M -XX:MetaspaceSize=64M -XX:MaxMetaspaceSize=64M -Xss228K -XX:-UseGCOverheadLimit -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC"}],"resources":{"limits":{"memory":"1Gi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/deviceon/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T07:28:49Z","lastTransitionTime":"2019-10-02T07:28:49Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2019-10-02T07:28:49Z","lastTransitionTime":"2019-10-02T07:25:05Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-deviceon-worker-78f8585bcd\" has successfully progressed."}]}},{"metadata":{"name":"es-edgesense-ota","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-edgesense-ota","uid":"a50796fb-e4e8-11e9-a1c5-c400ad16bc2d","resourceVersion":"26491881","generation":1,"creationTimestamp":"2019-10-02T07:45:46Z","labels":{"app":"es-edgesense","chart":"es-edgesense-1.0.16","heritage":"Tiller","release":"es-edgesense","rmmModule":"ota-worker"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-edgesense","release":"es-edgesense","rmmModule":"ota-worker"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-edgesense","release":"es-edgesense","rmmModule":"ota-worker"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"es-edgesense","items":[{"key":"serverConfig","path":"Server_Config.xml"}],"defaultMode":420}}],"initContainers":[{"name":"init","image":"adveiss.azurecr.io/es-postgres:9.6.11","command":["sh"],"args":["-c","set -x\n\necho \"Waiting for PostgreSQL to be initialized...\"\nuntil psql -c 'select * from public.device' \u0026\u003e /dev/null; do\n    echo \"Still initializing...\"\n    sleep 2\ndone\n"],"env":[{"name":"PGHOST","value":"es-postgres"},{"name":"PGPORT","value":"5432"},{"name":"PGDATABASE","value":"wisepaas"},{"name":"PGUSER","value":"rmm"},{"name":"PGPASSWORD","value":"rmm"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-edgesense-ota","image":"adveiss.azurecr.io/es-ota-worker:1.0.104","env":[{"name":"SERVER_CONFIG","value":"/rmm/config"},{"name":"JAVA_OPTS","value":"-Xmx210665K -Xms210665K -XX:MetaspaceSize=64M -XX:MaxMetaspaceSize=64M -Xss228K"}],"resources":{"limits":{"memory":"512Mi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/rmm/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T07:45:58Z","lastTransitionTime":"2019-10-02T07:45:58Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2019-10-02T07:45:58Z","lastTransitionTime":"2019-10-02T07:45:46Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-edgesense-ota-966c7fb68\" has successfully progressed."}]}},{"metadata":{"name":"es-edgesense-portal","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-edgesense-portal","uid":"a508403e-e4e8-11e9-a1c5-c400ad16bc2d","resourceVersion":"26491880","generation":1,"creationTimestamp":"2019-10-02T07:45:46Z","labels":{"app":"es-edgesense","chart":"es-edgesense-1.0.16","heritage":"Tiller","release":"es-edgesense","rmmModule":"rmm-portal"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-edgesense","release":"es-edgesense","rmmModule":"rmm-portal"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-edgesense","release":"es-edgesense","rmmModule":"rmm-portal"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"es-edgesense","items":[{"key":"serverConfig","path":"Server_Config.xml"}],"defaultMode":420}}],"initContainers":[{"name":"init","image":"adveiss.azurecr.io/es-postgres:9.6.11","command":["sh"],"args":["-c","set -x\n\necho \"Waiting for PostgreSQL to be initialized...\"\nuntil psql -c 'select * from public.device' \u0026\u003e /dev/null; do\n    echo \"Still initializing...\"\n    sleep 2\ndone\n"],"env":[{"name":"PGHOST","value":"es-postgres"},{"name":"PGPORT","value":"5432"},{"name":"PGDATABASE","value":"wisepaas"},{"name":"PGUSER","value":"rmm"},{"name":"PGPASSWORD","value":"rmm"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-edgesense-portal","image":"adveiss.azurecr.io/es-rmm-portal:1.0.104","env":[{"name":"SERVER_ACTIVATENAME","value":"EdgeSense_Data-Server"},{"name":"SERVER_CONFIG","value":"/rmm/config"},{"name":"CATALINA_OPTS","value":"-Xmx768M -Xms768M -XX:MetaspaceSize=256M -XX:MaxMetaspaceSize=256M"}],"resources":{"limits":{"memory":"2Gi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/rmm/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T07:45:57Z","lastTransitionTime":"2019-10-02T07:45:57Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2019-10-02T07:45:57Z","lastTransitionTime":"2019-10-02T07:45:46Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-edgesense-portal-76f5b54966\" has successfully progressed."}]}},{"metadata":{"name":"es-edgesense-worker","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-edgesense-worker","uid":"a50d39c7-e4e8-11e9-a1c5-c400ad16bc2d","resourceVersion":"26491898","generation":1,"creationTimestamp":"2019-10-02T07:45:46Z","labels":{"app":"es-edgesense","chart":"es-edgesense-1.0.16","heritage":"Tiller","release":"es-edgesense","rmmModule":"rmm-worker"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-edgesense","release":"es-edgesense","rmmModule":"rmm-worker"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-edgesense","release":"es-edgesense","rmmModule":"rmm-worker"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"es-edgesense","items":[{"key":"serverConfig","path":"Server_Config.xml"}],"defaultMode":420}},{"name":"script","configMap":{"name":"es-edgesense","items":[{"key":"initPostgres","path":"postgres.sql"},{"key":"initMongo","path":"mongo.js"}],"defaultMode":420}}],"initContainers":[{"name":"init-postgres","image":"adveiss.azurecr.io/es-postgres:9.6.11","command":["sh"],"args":["-c","set -x\n\necho \"Waiting for PostgreSQL to be ready...\"\nuntil pg_isready -q; do\n    echo \"Still waiting...\"\n    sleep 2\ndone\n\necho \"Initializing PostgreSQL roles...\"\npsql -f /rmm/init/postgres.sql\npsql -c \"SELECT 'x123' FROM pg_database WHERE datname='wisepaas'\" | grep 'x123'\nif [ $? -ne 0 ]; then\n    echo \"Creating 'wisepaas' database...\"\n    psql -c \"CREATE DATABASE wisepaas WITH OWNER wisepaas\"\nfi\n"],"env":[{"name":"PGHOST","value":"es-postgres"},{"name":"PGPORT","value":"5432"},{"name":"PGUSER","value":"postgres"},{"name":"PGPASSWORD","value":"advant1cH"}],"resources":{},"volumeMounts":[{"name":"script","readOnly":true,"mountPath":"/rmm/init"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"init-mongo","image":"adveiss.azurecr.io/es-mongo:3.6.9-stretch","command":["bash"],"args":["-c","set -x\n\nIFS=';' read -ra M_HOST \u003c\u003c\u003c \"es-mongo\"\nIFS=';' read -ra M_PORT \u003c\u003c\u003c \"27017\"\n\nHOST=\"\"\nif [ ${#M_HOST[@]} -eq ${#M_PORT[@]} ]; then\n    end=${#M_HOST[@]}\n    for ((i = 0; i \u003c end; i++)); do\n        if [ \"${HOST}\" = \"\" ]; then\n            HOST=\"${M_HOST[i]}:${M_PORT[i]}\"\n        else\n            HOST=\"${HOST},${M_HOST[i]}:${M_PORT[i]}\"\n        fi\n    done\nfi\n\nif $(echo ${HOST} | grep -q ','); then\n    HOST=\"mongodb://${HOST}/?replicaSet=rs0\"\nfi\n\necho \"Waiting for MongoDB to be ready...\"\nuntil mongo --host ${HOST} -u \"admin\" -p \"advant1cH\" --eval \"db.adminCommand('ping')\" admin; do\n    echo \"Still waiting...\"\n    sleep 2\ndone\n\necho \"Initializing MongoDB...\"\nmongo --host ${HOST} -u \"admin\" -p \"advant1cH\" admin /rmm/init/mongo.js\n"],"resources":{},"volumeMounts":[{"name":"script","readOnly":true,"mountPath":"/rmm/init"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-edgesense-worker","image":"adveiss.azurecr.io/es-rmm-worker:1.0.104","env":[{"name":"SERVER_ACTIVATENAME","value":"EdgeSense_Data-Server"},{"name":"SERVER_CONFIG","value":"/rmm/config"},{"name":"JAVA_OPTS","value":"-Xmx384M -Xms384M -XX:MetaspaceSize=64M -XX:MaxMetaspaceSize=64M -Xss228K -XX:-UseGCOverheadLimit -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC"}],"resources":{"limits":{"memory":"1Gi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/rmm/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T07:46:01Z","lastTransitionTime":"2019-10-02T07:46:01Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2019-10-02T07:46:01Z","lastTransitionTime":"2019-10-02T07:45:46Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-edgesense-worker-5b6f55fc8d\" has successfully progressed."}]}},{"metadata":{"name":"es-minio","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-minio","uid":"f6331b62-e0ef-11e9-b1b9-c400ad16bc2d","resourceVersion":"26452391","generation":4,"creationTimestamp":"2019-09-27T06:28:04Z","labels":{"app":"es-minio","chart":"es-minio-2.3.15","heritage":"Tiller","release":"es-minio"},"annotations":{"deployment.kubernetes.io/revision":"4"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-minio","release":"es-minio"}},"template":{"metadata":{"name":"es-minio","creationTimestamp":null,"labels":{"app":"es-minio","release":"es-minio"}},"spec":{"volumes":[{"name":"export","persistentVolumeClaim":{"claimName":"es-minio"}},{"name":"minio-server-config","configMap":{"name":"es-minio","defaultMode":420}},{"name":"minio-user","secret":{"secretName":"es-minio","defaultMode":420}},{"name":"minio-config-dir","emptyDir":{}}],"containers":[{"name":"es-minio","image":"adveiss.azurecr.io/minio:RELEASE.2018-12-06T01-27-43Z","command":["/bin/sh","-ce","cp /tmp/config.json /root/.minio/ \u0026\u0026 /usr/bin/docker-entrypoint.sh minio -C /root/.minio/ server /export"],"ports":[{"name":"service","containerPort":9000,"protocol":"TCP"}],"env":[{"name":"MINIO_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"es-minio","key":"accesskey"}}},{"name":"MINIO_SECRET_KEY","valueFrom":{"secretKeyRef":{"name":"es-minio","key":"secretkey"}}},{"name":"MINIO_BROWSER","value":"on"}],"resources":{"limits":{"cpu":"250m","memory":"512Mi"}},"volumeMounts":[{"name":"export","mountPath":"/export"},{"name":"minio-server-config","mountPath":"/tmp/config.json","subPath":"config.json"},{"name":"minio-config-dir","mountPath":"/root/.minio/"}],"livenessProbe":{"httpGet":{"path":"/minio/health/live","port":"service","scheme":"HTTP"},"initialDelaySeconds":5,"timeoutSeconds":1,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/minio/health/ready","port":"service","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":15,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":4,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2019-09-27T08:58:38Z","lastTransitionTime":"2019-09-27T06:28:04Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-minio-68fb8556cf\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T03:39:14Z","lastTransitionTime":"2019-10-02T03:39:14Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"es-mongo","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-mongo","uid":"88b17df7-c247-11e9-90d6-c400ad16bc2d","resourceVersion":"26452417","generation":1,"creationTimestamp":"2019-08-19T06:06:50Z","labels":{"app":"es-mongo","chart":"es-mongo-1.0.8","heritage":"Tiller","release":"es-mongo"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-mongo","component":"mongo-database","release":"es-mongo"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-mongo","chart":"es-mongo-1.0.8","component":"mongo-database","release":"es-mongo"}},"spec":{"volumes":[{"name":"data","persistentVolumeClaim":{"claimName":"es-mongo"}},{"name":"conf","configMap":{"name":"es-mongo","items":[{"key":"mongod.conf","path":"mongod.conf"}],"defaultMode":420}},{"name":"etc","emptyDir":{}}],"initContainers":[{"name":"init","image":"adveiss.azurecr.io/es-mongo:3.6.9-stretch","command":["bash"],"args":["-c","set -x\nbytes_total=$(cat /sys/fs/cgroup/memory/memory.limit_in_bytes)\nbytes_cache=$(( (bytes_total - 1024**3) / 2 ))\nmin_bytes_cache=$(( 256 * 1024**2 ))\n[ ${bytes_cache} -lt ${min_bytes_cache} ] \\\n    \u0026\u0026 bytes_cache=${min_bytes_cache}\n\ngb_cache=$(printf %.1f\\\\n \"$(( bytes_cache * 10**3 / 1024**3 ))e-3\")\ncat \u003c\u003c EOF \u003e /etc/mongo/mongod.conf\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: ${gb_cache}\nEOF\ncat /tmp/conf/mongod.conf \u003e\u003e /etc/mongo/mongod.conf\n"],"resources":{"limits":{"memory":"6Gi"}},"volumeMounts":[{"name":"conf","mountPath":"/tmp/conf"},{"name":"etc","mountPath":"/etc/mongo"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"es-mongo","image":"adveiss.azurecr.io/es-mongo:3.6.9-stretch","args":["--config=/etc/mongo/mongod.conf"],"ports":[{"name":"mongo-database","containerPort":27017,"protocol":"TCP"}],"env":[{"name":"MONGO_INITDB_ROOT_USERNAME","valueFrom":{"secretKeyRef":{"name":"es-mongo","key":"mongo-username"}}},{"name":"MONGO_INITDB_ROOT_PASSWORD","valueFrom":{"secretKeyRef":{"name":"es-mongo","key":"mongo-password"}}}],"resources":{"limits":{"memory":"6Gi"}},"volumeMounts":[{"name":"data","mountPath":"/data/db"},{"name":"etc","mountPath":"/etc/mongo"}],"livenessProbe":{"exec":{"command":["bash","-c","exec mongo --username=${MONGO_INITDB_ROOT_USERNAME} --password=${MONGO_INITDB_ROOT_PASSWORD} --authenticationDatabase=admin --eval=\"db.adminCommand('ping')\""]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":6},"readinessProbe":{"exec":{"command":["bash","-c","exec mongo --username=${MONGO_INITDB_ROOT_USERNAME} --password=${MONGO_INITDB_ROOT_PASSWORD} --authenticationDatabase=admin --eval=\"db.adminCommand('ping')\""]},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":6},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2019-08-19T06:09:33Z","lastTransitionTime":"2019-08-19T06:06:50Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-mongo-7477b4bcf\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T03:39:17Z","lastTransitionTime":"2019-10-02T03:39:17Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"es-postgres","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-postgres","uid":"3d6b71cb-ce11-11e9-89b8-c400ad16bc2d","resourceVersion":"26452400","generation":1,"creationTimestamp":"2019-09-03T06:08:25Z","labels":{"app":"es-postgres","chart":"es-postgres-1.0.7","heritage":"Tiller","release":"es-postgres"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-postgres","release":"es-postgres"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-postgres","chart":"es-postgres-1.0.7","release":"es-postgres"}},"spec":{"volumes":[{"name":"data","persistentVolumeClaim":{"claimName":"es-postgres"}},{"name":"etc","secret":{"secretName":"es-postgres","items":[{"key":"username","path":"username"},{"key":"password","path":"password"}],"defaultMode":420}}],"containers":[{"name":"es-postgres","image":"adveiss.azurecr.io/es-postgres:9.6.11","ports":[{"name":"postgres","containerPort":5432,"protocol":"TCP"}],"env":[{"name":"POSTGRES_USER_FILE","value":"/etc/postgresql/username"},{"name":"POSTGRES_PASSWORD_FILE","value":"/etc/postgresql/password"},{"name":"PGDATA","value":"/var/lib/postgresql/data/pgdata"},{"name":"POD_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}}],"resources":{"limits":{"memory":"512Mi"}},"volumeMounts":[{"name":"data","mountPath":"/var/lib/postgresql/data"},{"name":"etc","mountPath":"/etc/postgresql"}],"livenessProbe":{"exec":{"command":["sh","-c","exec pg_isready -U \"postgres\" --host ${POD_IP}"]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":6},"readinessProbe":{"exec":{"command":["sh","-c","exec pg_isready -U \"postgres\" --host ${POD_IP}"]},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":6},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2019-09-03T06:09:01Z","lastTransitionTime":"2019-09-03T06:08:25Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-postgres-d9448cc8c\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T03:39:15Z","lastTransitionTime":"2019-10-02T03:39:15Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"es-rabbitmq","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/es-rabbitmq","uid":"1d454612-cfbd-11e9-89b8-c400ad16bc2d","resourceVersion":"26452655","generation":1,"creationTimestamp":"2019-09-05T09:11:15Z","labels":{"app":"es-rabbitmq","chart":"es-rabbitmq-1.0.9","heritage":"Tiller","release":"es-rabbitmq"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"es-rabbitmq","release":"es-rabbitmq"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"es-rabbitmq","chart":"es-rabbitmq-1.0.9","release":"es-rabbitmq"}},"spec":{"volumes":[{"name":"data","persistentVolumeClaim":{"claimName":"es-rabbitmq"}},{"name":"etc","configMap":{"name":"es-rabbitmq","items":[{"key":"enabled_plugins","path":"enabled_plugins"},{"key":"rabbitmq.conf","path":"rabbitmq.conf"},{"key":"set_env.sh","path":"set_env.sh"}],"defaultMode":420}},{"name":"ssl","secret":{"secretName":"es-rabbitmq","items":[{"key":"cacert.pem","path":"cacert.pem"},{"key":"cert.pem","path":"cert.pem"},{"key":"key.pem","path":"key.pem"}],"defaultMode":420}}],"containers":[{"name":"es-rabbitmq","image":"adveiss.azurecr.io/es-rabbitmq:3.7.8","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"mqtt","containerPort":1883,"protocol":"TCP"},{"name":"http","containerPort":15672,"protocol":"TCP"},{"name":"amqp-ssl","containerPort":5671,"protocol":"TCP"},{"name":"mqtt-ssl","containerPort":8883,"protocol":"TCP"}],"env":[{"name":"RABBITMQ_ERLANG_COOKIE","valueFrom":{"secretKeyRef":{"name":"es-rabbitmq","key":"rabbitmq-erlang-cookie"}}}],"resources":{"limits":{"memory":"6Gi"}},"volumeMounts":[{"name":"data","mountPath":"/var/lib/rabbitmq"},{"name":"etc","mountPath":"/etc/rabbitmq"},{"name":"ssl","readOnly":true,"mountPath":"/ssl"}],"livenessProbe":{"httpGet":{"path":"/api/healthchecks/node","port":15672,"scheme":"HTTP","httpHeaders":[{"name":"Authorization","value":"Basic YWRtaW46YWR2YW50MWNI"}]},"initialDelaySeconds":120,"timeoutSeconds":15,"periodSeconds":15,"successThreshold":1,"failureThreshold":6},"readinessProbe":{"httpGet":{"path":"/api/healthchecks/node","port":15672,"scheme":"HTTP","httpHeaders":[{"name":"Authorization","value":"Basic YWRtaW46YWR2YW50MWNI"}]},"initialDelaySeconds":30,"timeoutSeconds":15,"periodSeconds":15,"successThreshold":1,"failureThreshold":6},"lifecycle":{"postStart":{"exec":{"command":["sh","/etc/rabbitmq/set_env.sh"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"imagePullSecrets":[{"name":"acr-auth"}],"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2019-09-05T09:12:07Z","lastTransitionTime":"2019-09-05T09:11:16Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"es-rabbitmq-68b84c55d5\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2019-10-02T03:40:00Z","lastTransitionTime":"2019-10-02T03:40:00Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}}]